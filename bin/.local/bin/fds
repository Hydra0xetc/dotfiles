#!/bin/bash

# Check if there are any tmux sessions
sessions=$(tmux ls 2>/dev/null)
if [ -z "$sessions" ]; then
  echo "No active tmux sessions found."
  exit 1
fi

# Select session using fzf
selected=$(echo "$sessions" | fzf --border --prompt="Select tmux session > " --height=60% --reverse | cut -d: -f1)

# Exit if no selection was made
if [ -z "$selected" ]; then
  exit 0
fi

# Function to switch/attach session
switch_to() {
    if [[ -z $TMUX ]]; then
        # If NOT inside tmux -> attach
        tmux attach -t "$1"
    else
        # If already inside tmux -> switch client
        tmux switch-client -t "$1"
    fi
}

# Switch to selected session
switch_to "$selected"
